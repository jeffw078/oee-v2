{% extends 'base.html' %}

{% block title %}Apontamento de Soldagem{% endblock %}

{% block extra_css %}
<style>
    body {
        background-color: #f8f9fa;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .header-sistema {
        background: linear-gradient(135deg, #dc3545, #c82333);
        color: white;
        padding: 1rem 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        position: relative;
    }

    .logo-empresa {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .logo-empresa img {
        height: 40px;
    }

    .status-conexao {
        position: absolute;
        top: 15px;
        right: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .status-online {
        background-color: #28a745;
        color: white;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: bold;
    }

    .relogio-display {
        font-size: 2.5rem;
        font-weight: bold;
        color: #dc3545;
        text-align: center;
        margin: 20px 0;
    }

    .saudacao-soldador {
        background-color: #e9ecef;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        margin: 20px 0;
        font-size: 1.3rem;
        color: #495057;
    }

    /* M√≥dulos em Grid 2x2 como no MVP */
    .modulos-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 30px 0;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    .btn-modulo {
        background: linear-gradient(135deg, #dc3545, #c82333);
        color: white;
        border: none;
        border-radius: 15px;
        height: 120px;
        font-size: 1.4rem;
        font-weight: bold;
        text-transform: uppercase;
        box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .btn-modulo:hover {
        background: linear-gradient(135deg, #c82333, #a71e2a);
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(220, 53, 69, 0.4);
    }

    /* Bot√µes secund√°rios */
    .botoes-secundarios {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 15px;
        margin: 30px 0;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    .btn-secundario {
        background-color: #6c757d;
        color: white;
        border: none;
        border-radius: 10px;
        height: 60px;
        font-size: 1rem;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .btn-qualidade {
        background-color: #28a745;
    }

    .btn-parada {
        background-color: #ffc107;
        color: #212529;
    }

    .btn-finalizar {
        background-color: #dc3545;
    }

    /* Processo ativo */
    .processo-ativo {
        background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
        border: 2px solid #2196F3;
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        text-align: center;
        position: relative;
    }

    .processo-info {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 15px;
        margin: 15px 0;
        font-size: 1.1rem;
    }

    .cronometro-soldagem {
        font-size: 2rem;
        font-weight: bold;
        color: #2196F3;
        margin: 15px 0;
    }

    /* Parada sobreposta - CORRE√á√ÉO DO PROBLEMA 2 */
    .parada-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 193, 7, 0.95);
        z-index: 1000;
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .parada-content {
        background: white;
        border-radius: 20px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .parada-timer {
        font-size: 3rem;
        font-weight: bold;
        color: #dc3545;
        margin: 20px 0;
    }

    /* Bot√µes de a√ß√£o */
    .btn-acao {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        border: none;
        border-radius: 10px;
        padding: 15px 30px;
        font-size: 1.2rem;
        font-weight: bold;
        margin: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-acao:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
    }

    .btn-pausa {
        background: linear-gradient(135deg, #6c757d, #5a6268);
    }

    .btn-qualidade-acao {
        background: linear-gradient(135deg, #17a2b8, #138496);
    }

    /* Responsividade para tablet */
    @media (max-width: 768px) {
        .modulos-grid {
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .botoes-secundarios {
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .processo-info {
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .relogio-display {
            font-size: 2rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header com status de conex√£o -->
    <div class="header-sistema">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div class="logo-empresa">
                    <div class="fw-bold fs-4">SteelMast</div>
                </div>
                <div class="text-center">
                    <h1 class="h3 mb-0">Sistema de Apontamento OEE</h1>
                </div>
                <div class="status-conexao">
                    <div id="statusConexao" class="status-online">
                        üü¢ Online
                    </div>
                    <div class="relogio-display" id="relogioTempo">
                        {{ agora|date:"H:i:s" }}
                    </div>
                    <button class="btn btn-outline-light btn-sm" onclick="confirmarLogout()">
                        üö™ SAIR
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sauda√ß√£o do soldador -->
    <div class="container">
        <div class="saudacao-soldador">
            {{ saudacao }}, {{ soldador.usuario.nome_completo|upper }}!
        </div>

        <!-- Informa√ß√µes do pedido atual -->
        {% if processo_ativo %}
            <div class="alert alert-info text-center">
                <strong>Pedido:</strong> {{ processo_ativo.pedido.numero }} | 
                <strong>Poste/Tubo:</strong> {{ processo_ativo.numero_poste_tubo }}
            </div>
        {% endif %}

        <!-- Processo de soldagem ativo -->
        {% if processo_ativo %}
            <div class="processo-ativo">
                <h3>üî• Soldagem em Andamento: {{ processo_ativo.modulo.nome }}</h3>
                
                <div class="processo-info">
                    <div><strong>Pedido:</strong> {{ processo_ativo.pedido.numero }}</div>
                    <div><strong>Poste/Tubo:</strong> {{ processo_ativo.numero_poste_tubo }}</div>
                    <div><strong>In√≠cio:</strong> {{ processo_ativo.inicio_processo|date:"H:i:s" }}</div>
                </div>

                {% if processo_ativo.diametro %}
                    <div><strong>Di√¢metro do Tubo:</strong> {{ processo_ativo.diametro }} mm</div>
                {% endif %}
                
                <div><strong>Componente:</strong> {{ processo_ativo.componente.nome }}</div>
                
                <div class="cronometro-soldagem" id="cronometroAtivo">
                    00:00:00
                </div>

                <div class="d-flex justify-content-center gap-3 flex-wrap">
                    <button class="btn-acao" onclick="finalizarAtividade()">
                        ‚úÖ Finalizar Atividade
                    </button>
                    <button class="btn-acao btn-pausa" onclick="abrirParadas()">
                        ‚è∏ Pausa
                    </button>
                    <button class="btn-acao btn-qualidade-acao" onclick="abrirQualidade()">
                        üîç Qualidade
                    </button>
                </div>
            </div>
        {% else %}
            <!-- Sele√ß√£o de m√≥dulos quando n√£o h√° processo ativo -->
            <div class="modulos-grid">
                {% for modulo in modulos %}
                    <button class="btn-modulo" onclick="selecionarModulo({{ modulo.id }}, '{{ modulo.nome }}')">
                        {{ modulo.nome }}
                    </button>
                {% endfor %}
            </div>

            <!-- Bot√µes secund√°rios -->
            <div class="botoes-secundarios">
                <button class="btn-secundario btn-qualidade" onclick="abrirQualidade()">
                    üîç Qualidade
                </button>
                <button class="btn-secundario btn-parada" onclick="abrirParadas()">
                    ‚è∏ Parada
                </button>
                <button class="btn-secundario btn-finalizar" onclick="finalizarTurno()">
                    üèÅ Finalizar Turno
                </button>
            </div>
        {% endif %}
    </div>

    <!-- Overlay de parada sobreposta - SOLU√á√ÉO PROBLEMA 2 -->
    <div id="paradaOverlay" class="parada-overlay">
        <div class="parada-content">
            <h3 id="tituloParada">‚è∏ Pausa em Andamento</h3>
            <div id="motivoParada">Motivo: <span id="motivoTexto">-</span></div>
            <div id="inicioParada">In√≠cio da pausa: <span id="inicioTexto">-</span></div>
            <div class="parada-timer" id="timerParada">00:00:00</div>
            <button class="btn-acao" onclick="retomarSoldagem()">
                ‚ñ∂ Retomar Soldagem
            </button>
        </div>
    </div>
</div>

<!-- Modais para sele√ß√£o -->
<!-- Modal sele√ß√£o de componente -->
<div class="modal fade" id="modalComponentes" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Componentes do <span id="nomeModuloSelecionado"></span></h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <!-- Inputs de pedido e poste -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label">N√∫mero do Pedido:</label>
                        <input type="number" id="numeroPedido" class="form-control" placeholder="Ex: 5454">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">N√∫mero Poste/Tubo:</label>
                        <input type="number" id="numeroPoste" class="form-control" placeholder="Ex: 1">
                    </div>
                </div>
                
                <!-- Grid de componentes como no MVP -->
                <div id="componentesGrid" class="row">
                    <!-- Componentes carregados via JavaScript -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal sele√ß√£o de parada -->
<div class="modal fade" id="modalParadas" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-warning">
                <h5 class="modal-title">Motivo da Parada</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div id="paradasGrid" class="d-grid gap-2">
                    <!-- Paradas carregadas via JavaScript -->
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}


{% block extra_js %}
<script>
let moduloSelecionado = null;
let paradaAtiva = null;
let inicioProcesso = null;
let inicioParada = null;

// Verificar se h√° processo ativo (corrigido)
const processoAtivo = {% if processo_ativo and processo_ativo.inicio_processo %}true{% else %}false{% endif %};
const inicioProcessoStr = {% if processo_ativo and processo_ativo.inicio_processo %}'{{ processo_ativo.inicio_processo|date:"Y-m-d H:i:s" }}'{% else %}null{% endif %};

// Atualizar rel√≥gio
function atualizarRelogio() {
    const agora = new Date();
    const tempo = agora.toLocaleTimeString('pt-BR');
    const elementoRelogio = document.getElementById('relogioTempo');
    if (elementoRelogio) {
        elementoRelogio.textContent = tempo;
    }
    
    // Atualizar cron√¥metro se h√° processo ativo (CORRIGIDO)
    if (processoAtivo && inicioProcessoStr) {
        atualizarCronometro();
    }
    
    // Atualizar timer de parada se ativa
    if (paradaAtiva) {
        atualizarTimerParada();
    }
}

function atualizarCronometro() {
    // Verificar se elementos existem
    const elementoCronometro = document.getElementById('cronometroAtivo');
    if (!elementoCronometro || !inicioProcessoStr) {
        return;
    }
    
    // Inicializar apenas uma vez
    if (!inicioProcesso && inicioProcessoStr) {
        inicioProcesso = new Date(inicioProcessoStr);
    }
    
    if (!inicioProcesso) {
        return;
    }
    
    const agora = new Date();
    const diferenca = Math.floor((agora - inicioProcesso) / 1000);
    
    const horas = Math.floor(diferenca / 3600);
    const minutos = Math.floor((diferenca % 3600) / 60);
    const segundos = diferenca % 60;
    
    const tempo = `${horas.toString().padStart(2, '0')}:${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`;
    elementoCronometro.textContent = tempo;
}

function atualizarTimerParada() {
    if (!inicioParada) return;
    
    const elementoTimer = document.getElementById('timerParada');
    if (!elementoTimer) return;
    
    const agora = new Date();
    const diferenca = Math.floor((agora - inicioParada) / 1000);
    
    const horas = Math.floor(diferenca / 3600);
    const minutos = Math.floor((diferenca % 3600) / 60);
    const segundos = diferenca % 60;
    
    const tempo = `${horas.toString().padStart(2, '0')}:${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`;
    elementoTimer.textContent = tempo;
}

// Sele√ß√£o de m√≥dulo
function selecionarModulo(moduloId, nomeModulo) {
    moduloSelecionado = moduloId;
    const elemento = document.getElementById('nomeModuloSelecionado');
    if (elemento) {
        elemento.textContent = nomeModulo;
    }
    
    // Carregar componentes
    carregarComponentes(moduloId);
    
    // Abrir modal
    const modalElement = document.getElementById('modalComponentes');
    if (modalElement && typeof bootstrap !== 'undefined') {
        new bootstrap.Modal(modalElement).show();
    }
}

function carregarComponentes(moduloId) {
    const grid = document.getElementById('componentesGrid');
    if (!grid) return;
    
    grid.innerHTML = '<div class="text-center"><div class="spinner-border"></div><div>Carregando componentes...</div></div>';
    
    fetch(`/soldagem/api/componentes/`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                renderizarComponentes(data.componentes);
            } else {
                grid.innerHTML = '<div class="alert alert-danger">Erro ao carregar componentes</div>';
            }
        })
        .catch(error => {
            console.error('Erro:', error);
            grid.innerHTML = '<div class="alert alert-danger">Erro de conex√£o</div>';
        });
}

function renderizarComponentes(componentes) {
    const grid = document.getElementById('componentesGrid');
    if (!grid) return;
    
    let html = '';
    
    componentes.forEach(comp => {
        const tempoTexto = comp.considera_diametro ? '(Di√¢metro do tubo)' : `(${comp.tempo_padrao}min*)`;
        
        html += `
            <div class="col-md-3 col-sm-6 mb-3">
                <button class="btn btn-outline-primary w-100 h-100 p-3" 
                        onclick="selecionarComponente(${comp.id}, '${comp.nome}', ${comp.considera_diametro})"
                        style="min-height: 80px;">
                    <div class="fw-bold">${comp.nome}</div>
                    <small class="text-muted">${tempoTexto}</small>
                </button>
            </div>
        `;
    });
    
    grid.innerHTML = html;
}

function selecionarComponente(componenteId, nomeComponente, consideraDiametro) {
    const numeroPedido = document.getElementById('numeroPedido');
    const numeroPoste = document.getElementById('numeroPoste');
    
    if (!numeroPedido || !numeroPoste || !numeroPedido.value || !numeroPoste.value) {
        alert('‚ùå Preencha o n√∫mero do pedido e do poste/tubo');
        return;
    }
    
    let diametro = null;
    if (consideraDiametro) {
        diametro = prompt('Digite o di√¢metro do tubo (mm):');
        if (!diametro || diametro <= 0) {
            alert('‚ùå Di√¢metro inv√°lido');
            return;
        }
    }
    
    // Iniciar soldagem
    iniciarSoldagem(componenteId, numeroPedido.value, numeroPoste.value, diametro);
}

function iniciarSoldagem(componenteId, numeroPedido, numeroPoste, diametro) {
    const dados = {
        modulo_id: moduloSelecionado,
        componente_id: componenteId,
        numero_pedido: numeroPedido,
        numero_poste_tubo: numeroPoste,
        diametro: diametro
    };
    
    fetch('/soldagem/iniciar_soldagem/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCsrfToken()
        },
        body: JSON.stringify(dados)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            const modalElement = document.getElementById('modalComponentes');
            if (modalElement && typeof bootstrap !== 'undefined') {
                bootstrap.Modal.getInstance(modalElement)?.hide();
            }
            location.reload(); // Recarregar para mostrar processo ativo
        } else {
            alert(`‚ùå Erro: ${data.message}`);
        }
    })
    .catch(error => {
        console.error('Erro:', error);
        alert('‚ùå Erro de conex√£o');
    });
}

// CORRE√á√ÉO PROBLEMA 2 - Paradas sobrepostas
function abrirParadas() {
    // Se h√° processo ativo, pausar soldagem
    if (processoAtivo) {
        pausarSoldagem();
    }
    
    // Carregar tipos de parada
    carregarTiposParada();
    
    // Abrir modal
    const modalElement = document.getElementById('modalParadas');
    if (modalElement && typeof bootstrap !== 'undefined') {
        new bootstrap.Modal(modalElement).show();
    }
}

function carregarTiposParada() {
    const grid = document.getElementById('paradasGrid');
    if (!grid) return;
    
    grid.innerHTML = '<div class="text-center"><div class="spinner-border"></div></div>';
    
    fetch('/soldagem/api/tipos_parada/')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                renderizarTiposParada(data.tipos_parada);
            }
        })
        .catch(error => {
            console.error('Erro ao carregar tipos de parada:', error);
            grid.innerHTML = '<div class="alert alert-danger">Erro ao carregar tipos de parada</div>';
        });
}

function renderizarTiposParada(tipos) {
    const grid = document.getElementById('paradasGrid');
    if (!grid) return;
    
    let html = '';
    
    tipos.forEach(tipo => {
        html += `
            <button class="btn btn-outline-warning btn-lg mb-2" 
                    onclick="iniciarParada(${tipo.id}, '${tipo.nome}', ${tipo.requer_senha_especial})"
                    style="background-color: ${tipo.cor_exibicao}; color: white; width: 100%;">
                ${tipo.nome}
                ${!tipo.penaliza_oee ? '<br><small>(N√£o penaliza OEE)</small>' : ''}
            </button>
        `;
    });
    
    grid.innerHTML = html;
}

function iniciarParada(tipoId, nomeParada, requerSenha) {
    if (requerSenha) {
        const senha = prompt('Digite a senha de autoriza√ß√£o:');
        if (!senha) return;
        
        // Validar senha (implementar valida√ß√£o real)
        if (senha !== 'qual123' && senha !== 'manut123') {
            alert('‚ùå Senha incorreta');
            return;
        }
    }
    
    // Fechar modal
    const modalElement = document.getElementById('modalParadas');
    if (modalElement && typeof bootstrap !== 'undefined') {
        bootstrap.Modal.getInstance(modalElement)?.hide();
    }
    
    // Iniciar parada
    const dados = {
        tipo_parada_id: tipoId,
        motivo_detalhado: `Parada: ${nomeParada}`
    };
    
    fetch('/soldagem/iniciar_parada/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCsrfToken()
        },
        body: JSON.stringify(dados)
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            mostrarParadaSobreposta(nomeParada);
        } else {
            alert(`‚ùå Erro: ${data.message}`);
        }
    })
    .catch(error => {
        console.error('Erro ao iniciar parada:', error);
        alert('‚ùå Erro de conex√£o');
    });
}

// SOLU√á√ÉO PROBLEMA 2 - Mostrar parada sobreposta
function mostrarParadaSobreposta(nomeParada) {
    paradaAtiva = true;
    inicioParada = new Date();
    
    const motivoTexto = document.getElementById('motivoTexto');
    const inicioTexto = document.getElementById('inicioTexto');
    const overlay = document.getElementById('paradaOverlay');
    
    if (motivoTexto) motivoTexto.textContent = nomeParada;
    if (inicioTexto) inicioTexto.textContent = inicioParada.toLocaleTimeString('pt-BR');
    if (overlay) overlay.style.display = 'flex';
}

function retomarSoldagem() {
    if (!confirm('Confirma o retorno da soldagem?')) return;
    
    fetch('/soldagem/finalizar_parada/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCsrfToken()
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            paradaAtiva = false;
            inicioParada = null;
            const overlay = document.getElementById('paradaOverlay');
            if (overlay) overlay.style.display = 'none';
            alert(`‚úÖ Parada finalizada! Dura√ß√£o: ${data.duracao_minutos.toFixed(1)} minutos`);
        } else {
            alert(`‚ùå Erro: ${data.message}`);
        }
    })
    .catch(error => {
        console.error('Erro ao finalizar parada:', error);
        alert('‚ùå Erro de conex√£o');
    });
}

function pausarSoldagem() {
    // L√≥gica para pausar soldagem (se necess√°rio)
    console.log('Soldagem pausada para parada');
}

function finalizarAtividade() {
    if (!confirm('‚úÖ Confirma a finaliza√ß√£o desta atividade?')) return;
    
    fetch('/soldagem/finalizar_atividade/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCsrfToken()
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert(`‚úÖ Atividade finalizada!\nTempo total: ${data.tempo_total} minutos`);
            location.reload();
        } else {
            alert(`‚ùå Erro: ${data.message}`);
        }
    })
    .catch(error => {
        console.error('Erro ao finalizar atividade:', error);
        alert('‚ùå Erro de conex√£o');
    });
}

function abrirQualidade() {
    // Redirecionar para painel de qualidade
    if (confirm('üîç Acessar painel de qualidade?\nSer√° necess√°ria senha especial.')) {
        const senha = prompt('Digite a senha da qualidade:');
        if (senha === 'qual123') {
            window.location.href = '/qualidade/painel/';
        } else {
            alert('‚ùå Senha incorreta');
        }
    }
}

function finalizarTurno() {
    if (confirm('üèÅ Confirma a finaliza√ß√£o do turno?')) {
        window.location.href = '/soldagem/finalizar_turno/';
    }
}

function confirmarLogout() {
    if (confirm('üö™ Confirma a sa√≠da do sistema?')) {
        window.location.href = '/soldagem/logout/';
    }
}

function getCsrfToken() {
    const tokenElement = document.querySelector('[name=csrfmiddlewaretoken]');
    if (tokenElement) {
        return tokenElement.value;
    }
    
    // Fallback: buscar no cookie
    const cookies = document.cookie.split(';');
    for (let cookie of cookies) {
        const [name, value] = cookie.trim().split('=');
        if (name === 'csrftoken') {
            return value;
        }
    }
    
    console.warn('CSRF token n√£o encontrado');
    return '';
}

// Inicializar quando o DOM estiver pronto
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar rel√≥gio
    setInterval(atualizarRelogio, 1000);
    atualizarRelogio();
    
    // Verificar se h√° Bootstrap dispon√≠vel
    if (typeof bootstrap === 'undefined') {
        console.warn('Bootstrap n√£o est√° carregado');
    }
    
    console.log('Sistema inicializado');
    console.log('Processo ativo:', processoAtivo);
    console.log('In√≠cio do processo:', inicioProcessoStr);
});
</script>

<!-- Token CSRF para JavaScript -->
{% csrf_token %}
{% endblock %}
